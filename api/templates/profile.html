{% extends "base.html" %}

{% block title %} E-ThrillHub |  {{ searched_user.username }} {% endblock %}

{% block content %}

    {% if searched_user.changed_profile_pic %}
        <div id="profile-div">
            <img src="/image/{{ searched_user.changed_profile_pic._id }}" alt="" id="pro_pic" class="pp"> {{ searched_user.username }}
        </div>
    {% else %}
        <div id="profile-div">
            <img src="{{ searched_user.profile_pic }}" alt="" id="pro_pic" class="pp"> {{ searched_user.username }}
        </div>
    {% endif %}

    {% if user == searched_user %}
        <a href="/profile/{{ user.username }}/Edit_Profile">Edit Profile</a>
    {% endif %}

    {% for pos in post %}
        <div id="post_container">
            {% if user == pos.author %}
            <ul id="post_menu">
                <button class="edit_post">Edit</button>
                <button class="delete_post">Delete</button>
            </ul>
            {% endif %}
            <div class="edit_post_modal">
                <div class="edit_post_modal_content">
                    <form action="/edit_post/{{ pos.id }}" method="post">
                        <label for="edit_post_text">Edit Text</label>
                        <input type="text" name="edit_post_text" id="edit_post_text">
                        <button type="submit">Submit</button>
                        <button class="edit_post_cancel">Cancel</button>
                    </form>
                </div>
            </div>
            <div class="delete_post_modal">
                <div class="del_post_modal_content">
                    <h3>Are You Sure You Want to Delete this Post?</h3>
                    <button><a href="/delete_post/{{ pos.id }}">Yes</a></button>
                    <button class="del_post_cancel">No</button>
                </div>
            </div>
            {% if pos.author.changed_profile_pic %}
                <div id="profile-div">
                    <img src="/image/{{ pos.author.changed_profile_pic._id }}" alt="" id="pro_pic" class="pp">
                </div>
            {% else %}
                <div id="profile-div">
                    <img src="{{ pos.author.profile_pic }}" alt="" id="pro_pic" class="pp">
                </div>
            {% endif %}
            <div id="post_header">
                <p id="post_username"> {{ pos.author.username }} </p>
                <p class="title"> {{ pos.title }} </p>
                {% if pos.link_url %}
                    <a href="{{ pos.link_url }}">{{ pos.link_url }}</a>
                {% endif %}
            </div>
            <div id="post_img">
                {% if pos.image_path %}
                    <img src="/image/{{ pos.image_path._id }}" alt="" class="post-image">
                {% endif %}
            </div>
        </div>
    {% endfor %}
    <div class="pro_pic_modal">
        <span class="close profile-pic-close">&times;</span>
    </div>
    {% if page < post_len %}
        <a href="/profile/{{ searched_user.username }}?page={{ page + 1 }}">load more</a>
    {% endif %}

    {% if page > 1 %}
        <a href="/profile/{{ searched_user.username }}?page={{ page - 1 }}">Previous page</a>
    {% endif %}

{% endblock %}