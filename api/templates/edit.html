{% extends "base.html" %}

{% block title %} E-ThrillHub | Edit {{ user.username }} {% endblock %}



{% block content %}
    {% if user.changed_profile_pic %}
        <div id="profile-div">
            <img src="/image/{{ user.changed_profile_pic._id }}" alt="" id="pro_pic" class="pp"> {{ user.username }}
        </div>
    {% else %}
        <div id="profile-div">
            <img src="{{ user.profile_pic }}" alt="" id="pro_pic" class="pp"> {{ user.username }}
        </div>
    {% endif %}

    <h2 style="text-align: center;">Edit Profile</h2>

    <div class="pro_pic_modal">
        <span class="close profile-pic-close">&times;</span>
    </div>

    <form action="" method="POST" enctype="multipart/form-data">
        <label for="change_username">Edit username</label>
        <input type="text" name="change_username" id="change_username" value="{{ user.username }}">
        <label for="change_email">Edit Email</label>
        <input type="email" name="change_email" id="change_email" value="{{ user.email }}">
        <label for="change_profile_pic">Edit Profile Picture</label>
        <input type="file" name="change_profile_pic" id="change_profile_pic">
        <button value="Delete Account" id="delete_acct">Delete Account</button>
        <button type="submit">SUBMIT</button>
    </form>
    <div class="del_acct_modal">
        <div class="del_acct_modal_content">
            <h3>Are you sure?</h3>
            <a href="/auth/delete_account">Yes</a>
            <span class="del_acct_cancel">No</span>
        </div>
    </div>
    <script>
        const getDelAcct = document.querySelector("#delete_acct");
        let getdelModal = document.querySelector(".del_acct_modal");
        getDelAcct.addEventListener("click", (event) => {
            event.preventDefault();
            getdelModal.style.display = "block";
        })
    </script>
{% endblock %}