{% extends "base.html" %}

{% block title %} JustIn | Make a Post {% endblock %}

{% block content %}

    <div id="post_container">
        {% if pos.author.changed_profile_pic %}
            <div id="profile-div">
                <img src="/image/{{ pos.author.changed_profile_pic._id }}" alt="" id="pro_pic" class="pp">
            </div>
        {% else %}
            <div id="profile-div">
                <img src="{{ pos.author.profile_pic }}" alt="" id="pro_pic" class="pp">
            </div>
        {% endif %}
        <div id="post_header">
            <a id="post_username" href="/profile/{{ pos.author.username }}"> {{ pos.author.username }} </a>
            <p class="title"> {{ pos.title }} </p>
            {% if pos.link_url %}
                <a href="{{ pos.link_url }}">{{ pos.link_url }}</a>
            {% endif %}
        </div>
        <div id="post_img">
            {% if pos.image_path %}
                <img src="/image/{{ pos.image_path._id }}" alt="" class="post-image">
            {% endif %}
        </div>

        {% if likes == 1 %}
            <h4 id="likes">{{ likes }} like</h4>
        {% else %}
            <h4 id="likes">{{ likes }} likes</h4>
        {% endif %}
    </div>

    <div class="like_modal">
        <span class="close profile-pic-close">&times;</span>
        <div id="like_modal_content">
            {% for like in pos.likes %}
                <h4 id="likers"> {{ like.username }} </h4>
            {% endfor %}
        </div>
    </div>

    <form action="/comment/{{ pos.id }}" method="POST">
        <label for="comments" style="margin-bottom: 1rem;">Comment</label>
        <textarea name="comments" id="comments" cols="30" rows="10">hello</textarea>
        <button type="submit" style="margin-top: 1rem;">Comment</button>
    </form>


    <div id="comment_container">
        {% if pos.comments %}
            {% for comment in pos.comments %}
                <div class="comment_contents">
                    <h3 class="commenter">
                        {{ comment.commenter.username }}
                    </h3>
                    <p class="comment_content">
                        {{ comment.content }}
                    </p>
                </div>
            {% endfor %}
        {% endif %}
    </div>

{% endblock %}